var Ot=Object.defineProperty;var kt=(r,t,e)=>t in r?Ot(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var i=(r,t,e)=>(kt(r,typeof t!="symbol"?t+"":t,e),e);function y(r){return r.splice(0)}var d;(function(r){r[r.Linear=0]="Linear",r[r.LinearContinuous=1]="LinearContinuous",r[r.Quadratic=2]="Quadratic",r[r.QuadraticContinuous=3]="QuadraticContinuous",r[r.Sine=4]="Sine",r[r.SineContinuous=5]="SineContinuous",r[r.Bump=6]="Bump",r[r.BumpContinuous=7]="BumpContinuous",r[r.Jump=8]="Jump"})(d||(d={}));var Fe=new Map([[d.Linear,At],[d.LinearContinuous,O],[d.Quadratic,lt],[d.QuadraticContinuous,Lt],[d.Sine,ft],[d.SineContinuous,Dt],[d.Bump,ht],[d.BumpContinuous,Ht],[d.Jump,Nt]]);function At(r){return r}function lt(r){return r*r}function ft(r){var t=r*Math.PI;return Math.sin(t)}function ht(r,t){var e=r*Math.PI;return .5*(1-Math.cos(e))-t*Math.sin(2*e)}function Nt(r,t){var e=(r-.5)*Math.PI;return r*r+t*Math.cos(e)}function O(r,t,e){return e?r-1:1-r}function Lt(r,t,e){return r=O(r,null,e),Math.sign(r)*lt(r)}function Dt(r,t,e){return r=O(r,null,e),ft(r)}function Ht(r,t,e){return r=O(r,null,e),ht(r,t)}function k(r,t,e){return typeof r===t||r instanceof e}function R(r){return k(r,"function",Function)}function S(r){return k(r,"string",String)}function J(r){return k(r,"boolean",Boolean)}function A(r){return k(r,"number",Number)}function I(r){return r instanceof Array}function Z(r,t){throw new Error((t||"Unexpected object: ")+r)}function g(r){return r==null}function c(r){return!g(r)}function tt(r){return r instanceof Uint8Array||r instanceof Uint8ClampedArray||r instanceof Int8Array||r instanceof Uint16Array||r instanceof Int16Array||r instanceof Uint32Array||r instanceof Int32Array||r instanceof Float32Array||r instanceof Float64Array||"BigUint64Array"in globalThis&&r instanceof globalThis.BigUint64Array||"BigInt64Array"in globalThis&&r instanceof globalThis.BigInt64Array}function N(r,t){return r.splice(t,1)[0]}var mt=new WeakMap,dt=class{constructor(){i(this,"listeners",new Map);i(this,"listenerOptions",new Map);mt.set(this,this.listeners)}addEventListener(t,e,n){if(R(e)){let o=this.listeners.get(t);o||(o=new Array,this.listeners.set(t,o)),o.find(s=>s===e)||(o.push(e),n&&this.listenerOptions.set(e,n))}}removeEventListener(t,e){if(R(e)){let n=this.listeners.get(t);n&&this.removeListener(n,e)}}removeListener(t,e){let n=t.findIndex(o=>o===e);n>=0&&(N(t,n),this.listenerOptions.has(e)&&this.listenerOptions.delete(e))}dispatchEvent(t){let e=this.listeners.get(t.type);if(e)for(let n of e){let o=this.listenerOptions.get(n);c(o)&&!J(o)&&o.once&&this.removeListener(e,n),n.call(this,t)}return!t.defaultPrevented}},L=class extends Event{get type(){return super.type}constructor(t){super(t)}},b=class extends dt{constructor(){super(...arguments);i(this,"bubblers",new Set);i(this,"scopes",new WeakMap)}addBubbler(t){this.bubblers.add(t)}removeBubbler(t){this.bubblers.delete(t)}addEventListener(t,e,n){super.addEventListener(t,e,n)}removeEventListener(t,e){super.removeEventListener(t,e)}addScopedEventListener(t,e,n,o){this.scopes.has(t)||this.scopes.set(t,[]),this.scopes.get(t).push([e,n]),this.addEventListener(e,n,o)}removeScope(t){let e=this.scopes.get(t);if(e){this.scopes.delete(t);for(let[n,o]of e)this.removeEventListener(n,o)}}clearEventListeners(t){let e=mt.get(this);for(let[n,o]of e)(g(t)||t===n)&&(y(o),e.delete(n))}dispatchEvent(t){if(!super.dispatchEvent(t))return!1;for(let e of this.bubblers)if(!e.dispatchEvent(t))return!1;return!0}};function gt(r,...t){for(let e of t)if(c(e))for(let[n,o]of e)r.set(n,o);return r}var $t=/OculusBrowser\/(\d+)\.(\d+)\.(\d+)/i,D=navigator.userAgent.match($t),H=!!D,Qr=H&&{major:parseFloat(D[1]),minor:parseFloat(D[2]),patch:parseFloat(D[3])},Jr=H&&/pacific/i.test(navigator.userAgent),Zr=H&&/quest/i.test(navigator.userAgent),tn=H&&/quest 2/i.test(navigator.userAgent);var zt=298.257223563,Kt=6378137;var et=1/zt,q=1-et,u=et/(2-et),rn=Kt/(1+u)*(1+u*u/4+u*u*u*u/64),U=Math.sqrt(1-q*q),h=1-q*q,nn=U*U/(1-U*U),on=1-h*(.25+h*(3/64+5*h/256)),sn=h*(3/8+h*(3/32+45*h/1024)),an=h*h*(15/256+h*45/1024),un=h*h*h*(35/3072),cn=[u/2-2*u*u/3+37*u*u*u/96,u*u/48+u*u*u/15,17*u*u*u/480],pn=[2*u-2*u*u/3,7*u*u/3-8*u*u*u/5,56*u*u*u/15];var rt;(function(r){r[r.Northern=0]="Northern",r[r.Southern=1]="Southern"})(rt||(rt={}));var Kn=2*Math.PI;var F=class{constructor(){i(this,"attached",new Array);i(this,"soFar",null);i(this,"total",null);i(this,"msg",null);i(this,"est",null)}report(t,e,n,o){this.soFar=t,this.total=e,this.msg=n,this.est=o;for(let s of this.attached)s.report(t,e,n,o)}attach(t){this.attached.push(t),t.report(this.soFar,this.total,this.msg,this.est)}end(){this.report(1,1,"done"),this.soFar=null,this.total=null,this.msg=null,this.est=null,y(this.attached)}};var W=class extends F{constructor(t,e){super();i(this,"i");i(this,"prog");this.i=t,this.prog=e}report(t,e,n,o){super.report(t,e,n,o),this.prog.update(this.i,t,e,n)}};var X=class{constructor(t){i(this,"prog");i(this,"weightTotal",0);i(this,"start");i(this,"subProgressCallbacks",new Array);i(this,"subProgressWeights",new Array);i(this,"subProgressValues",new Array);this.prog=t,this.start=performance.now();for(let e=0;e<this.subProgressWeights.length;++e)this.subProgressValues[e]=0,this.subProgressCallbacks[e]=new W(e,this)}addSubProgress(t){t=t||1,this.weightTotal+=t,this.subProgressWeights.push(t),this.subProgressValues.push(0);let e=new W(this.subProgressCallbacks.length,this);return this.subProgressCallbacks.push(e),e}update(t,e,n,o){if(this.prog){this.subProgressValues[t]=e/n;let s=0;for(let f=0;f<this.subProgressWeights.length;++f)s+=this.subProgressValues[f]*this.subProgressWeights[f];let a=performance.now(),p=a-this.start,l=this.start-a+p*this.weightTotal/s;this.prog.report(s,this.weightTotal,o,l)}}};function w(r){return c(r)&&R(r.report)&&R(r.attach)&&R(r.end)}function Rt(r){return new Et(r)}var Et=class extends X{pop(t){return this.addSubProgress(t)}};var fs=new Map([[2,new Map([[0,"B"],[1,"KiB"],[2,"MiB"],[3,"GiB"],[4,"TiB"]])],[10,new Map([[0,"B"],[1,"KB"],[2,"MB"],[3,"GB"],[4,"TB"]])]]);var Yt=1e3,nt=10,$=2.54,B=100,z=4,T=3,v=3,P=16.5,E=1e3,M=40,x=8,Mt=Yt*nt,Qt=Mt*$,Jt=Qt*z,yt=Jt*T,ms=yt*v,Zt=Mt*B,te=yt*P,ee=te*M,ds=Zt*E,gs=ee*x,re=nt*$,ne=re*z,It=ne*T,xs=It*v,oe=nt*B,se=It*P,ie=se*M,Rs=oe*E,Es=ie*x,Pt=$*z,_t=Pt*T,Ms=_t*v,ae=_t*P,ue=ae*M,ys=B*E,Is=ue*x,ot=z*T,ce=ot*v,st=B/$,pe=ot*P,le=pe*M,Ps=st*E,_s=le*x,Ss=T*v,fe=B/Pt,he=T*P,me=he*M,bs=fe*E,Fs=me*x,St=st/ot,de=P*M,ws=St*E,Ts=de*x,ge=st/ce,xe=P/v,Re=xe*M,vs=ge*E,Cs=Re*x,bt=P/St,Ft=bt*M,Bs=Ft*x,Os=E/bt,ks=M*x,Ee=E/Ft,As=x/Ee;var wt=class extends F{constructor(t,e){super();i(this,"server");i(this,"taskID");this.server=t,this.taskID=e}report(t,e,n,o){let s={type:"progress",taskID:this.taskID,soFar:t,total:e,msg:n,est:o};this.server.postMessage(s)}},it=class{constructor(t){i(this,"self");i(this,"methods",new Map);this.self=t,this.self.addEventListener("message",e=>{let n=e.data;this.callMethod(n)})}postMessage(t,e){c(e)?this.self.postMessage(t,e):this.self.postMessage(t)}callMethod(t){let e=this.methods.get(t.methodName);if(e)try{I(t.params)?e(t.taskID,...t.params):c(t.params)?e(t.taskID,t.params):e(t.taskID)}catch(n){this.onError(t.taskID,`method invocation error: ${t.methodName}(${n.message||n})`)}else this.onError(t.taskID,`method not found: ${t.methodName}`)}onError(t,e){let n={type:"error",taskID:t,errorMessage:e};this.postMessage(n)}onReturn(t,e,n){let o=null;if(e===void 0?o={type:"return",taskID:t}:o={type:"return",taskID:t,returnValue:e},c(n)){let s=n(e);this.postMessage(o,s)}else this.postMessage(o)}onEvent(t,e,n,o){let s=null;if(c(n)?s={type:"event",eventName:t,data:n(e)}:s={type:"event",eventName:t},s.data!==void 0&&c(o)){let a=o(s.data);this.postMessage(s,a)}else this.postMessage(s)}addMethodInternal(t,e,n){if(this.methods.has(t))throw new Error(`${t} method has already been mapped.`);this.methods.set(t,async(o,...s)=>{let a=new wt(this,o);try{let p=await e(...s,a);this.onReturn(o,p,n)}catch(p){console.error(p),this.onError(o,p.message||p)}})}addFunction(t,e,n){this.addMethodInternal(t,e,n)}addVoidFunction(t,e){this.addMethodInternal(t,e)}addMethod(t,e,n,o){this.addFunction(t,n.bind(e),o)}addVoidMethod(t,e,n){this.addVoidFunction(t,n.bind(e))}addEvent(t,e,n,o){t.addEventListener(e,s=>this.onEvent(e,s,n,o))}};if(!Me()){let r=Element.prototype,t=Document.prototype;"webkitRequestFullscreen"in r?(r.requestFullscreen=r.webkitRequestFullscreen,t.exitFullscreen=t.webkitRequestFullscreen,Object.defineProperties(t,{fullscreenEnabled:{get:function(){return this.webkitFullscreenEnabled}},fullscreenElement:{get:function(){return this.webkitFullscreenElement}}})):"mozRequestFullScreen"in r?(r.requestFullscreen=r.mozRequestFullScreen,t.exitFullscreen=t.mozCancelFullScreen,Object.defineProperties(t,{fullscreenEnabled:{get:function(){return this.mozFullScreenEnabled}},fullscreenElement:{get:function(){return this.mozFullScreenElement}}})):"msRequestFullscreen"in r&&(r.requestFullscreen=r.msRequestFullscreen,t.exitFullscreen=t.msExitFullscreen,Object.defineProperties(t,{fullscreenEnabled:{get:function(){return this.msFullscreenEnabled}},fullscreenElement:{get:function(){return this.msFullscreenElement}}}))}function Me(){return"requestFullscreen"in document.documentElement}function Tt(r){return S(r)||tt(r)||r instanceof Blob||r instanceof FormData||r instanceof ArrayBuffer||r instanceof ReadableStream||"Document"in globalThis&&r instanceof Document}var j=class extends b{constructor(t){super();i(this,"worker");i(this,"taskCounter",0);i(this,"invocations",new Map);this.worker=t,j.isSupported||console.warn("Workers are not supported on this system."),this.worker.addEventListener("message",e=>{let n=e.data;switch(n.type){case"event":this.propogateEvent(n);break;case"progress":this.progressReport(n);break;case"return":this.methodReturned(n);break;case"error":this.invocationError(n);break;default:Z(n)}})}postMessage(t,e){t.type!=="methodCall"&&Z(t.type),e?this.worker.postMessage(t,e):this.worker.postMessage(t)}dispose(){this.worker.terminate()}propogateEvent(t){let e=new L(t.eventName);this.dispatchEvent(Object.assign(e,t.data))}progressReport(t){let e=this.invocations.get(t.taskID),{onProgress:n}=e;n&&n.report(t.soFar,t.total,t.msg,t.est)}methodReturned(t){let e=this.removeInvocation(t.taskID),{resolve:n}=e;n(t.returnValue)}invocationError(t){let e=this.removeInvocation(t.taskID),{reject:n,methodName:o}=e;n(new Error(`${o} failed. Reason: ${t.errorMessage}`))}removeInvocation(t){let e=this.invocations.get(t);return this.invocations.delete(t),e}callMethod(t,e,n,o){if(!j.isSupported)return Promise.reject(new Error("Workers are not supported on this system."));let s=null,a=null;w(e)&&(o=e,e=null,n=null),w(n)&&!o&&(o=n,n=null),I(e)&&(s=e),I(n)&&(a=n);let p=this.taskCounter++;return new Promise((l,f)=>{let _={onProgress:o,resolve:l,reject:f,methodName:t};this.invocations.set(p,_);let m=null;c(e)?m={type:"methodCall",taskID:p,methodName:t,params:s}:m={type:"methodCall",taskID:p,methodName:t},this.postMessage(m,a)})}},K=j;i(K,"isSupported","Worker"in globalThis);var vt=class extends b{constructor(t,e){super();i(this,"scriptPath");i(this,"taskCounter");i(this,"workers");this.scriptPath=t.scriptPath;let n=-1,o=t.workers,s=null;if(A(o)?n=o:c(o)?(this.taskCounter=o.curTaskCounter,s=o.workers,n=s.length):n=navigator.hardwareConcurrency||4,n<1)throw new Error("Worker pool size must be a postive integer greater than 0");if(this.workers=new Array(n),g(s)){this.taskCounter=0;for(let a=0;a<n;++a)this.workers[a]=new e(new Worker(this.scriptPath,{type:"module"}))}else for(let a=0;a<n;++a)this.workers[a]=new e(s[a]);for(let a of this.workers)a.addBubbler(this)}dispose(){for(let t of this.workers)t.dispose();y(this.workers)}callMethod(t,e,n,o){if(!K.isSupported)return Promise.reject(new Error("Workers are not supported on this system."));let s=null,a=null;return w(e)&&(o=e,e=null,n=null),w(n)&&!o&&(o=n,n=null),I(e)&&(s=e),I(n)&&(a=n),this.nextWorker().callMethod(t,s,a,o)}nextWorker(){let e=this.taskCounter++%this.workers.length;return this.workers[e]}};i(vt,"isSupported","Worker"in globalThis);var at=class{async translateResponse(t,e){let{status:n,content:o,contentType:s,contentLength:a,fileName:p,headers:l,date:f}=await t;return{status:n,content:await e(o),contentType:s,contentLength:a,fileName:p,headers:l,date:f}}};function ut(r,t,e,n,o,s){return new Promise((a,p)=>{let l=!s;s&&s.then(()=>l=!0);let f=!1,_=o;function m(){_&&f&&a()}function Y(Q){return()=>{l&&p(`${Q} (${t.status})`)}}e.addEventListener("loadstart",()=>{l&&!f&&n&&n.report(0,1,r)}),e.addEventListener("progress",Q=>{if(l&&!f){let C=Q;n&&n.report(C.loaded,Math.max(C.loaded,C.total),r),C.loaded===C.total&&(_=!0,m())}}),e.addEventListener("load",()=>{l&&!f&&(n&&n.report(1,1,r),f=!0,m())}),e.addEventListener("error",Y("error")),e.addEventListener("abort",Y("abort")),e.addEventListener("timeout",Y("timeout"))})}function Ct(r,t,e,n,o,s,a){if(r.open(e,n),r.responseType=t,r.timeout=o,s)for(let[p,l]of s)r.setRequestHeader(p,l);c(a)?r.send(a):r.send()}function G(r,t,e){if(!r.has(t))return null;let n=r.get(t);try{let o=e(n);return r.delete(t),o}catch(o){console.warn(t,o)}return null}var ye=/filename=\"(.+)\"(;|$)/;function Bt(r){let t=r.getAllResponseHeaders().split(/[\r\n]+/).map(o=>{let s=o.split(": "),a=s.shift(),p=s.join(": ");return[a,p]}).filter(o=>o[0].length>0),e=new Map(t);return{status:r.status,content:r.response,contentType:G(e,"content-type",o=>o),contentLength:G(e,"content-length",parseFloat),fileName:G(e,"content-disposition",o=>{if(c(o)){let s=o.match(ye);if(c(s))return s[1]}return null}),date:G(e,"date",o=>new Date(o)),headers:e}}var ct=class extends at{constructor(){super(...arguments);i(this,"defaultPostHeaders",new Map)}setRequestVerificationToken(t){this.defaultPostHeaders.set("RequestVerificationToken",t)}async headOrGetXHR(t,e,n,o){let s=new XMLHttpRequest,a=ut(`requesting: ${n.path}`,s,s,o,!0);return Ct(s,e,t,n.path,n.timeout,n.headers),await a,Bt(s)}getXHR(t,e,n){return this.headOrGetXHR("GET",t,e,n)}head(t){return this.headOrGetXHR("HEAD","",t,null)}async postXHR(t,e,n){let o=null,s=gt(new Map,this.defaultPostHeaders,e.headers);if(e.body instanceof FormData&&c(s)){let _=new Array;for(let m of s.keys())m.toLowerCase()==="content-type"&&_.push(m);for(let m of _)s.delete(m)}Tt(e.body)&&!S(e.body)?o=e.body:c(e.body)&&(o=JSON.stringify(e.body));let a=Rt(n),p=new XMLHttpRequest,l=c(o)?ut("uploading",p,p.upload,a.pop(),!1):Promise.resolve(),f=ut("saving",p,p,a.pop(),!0,l);return Ct(p,t,"POST",e.path,e.timeout,s,o),await l,await f,Bt(p)}getBlob(t,e){return this.getXHR("blob",t,e)}postObjectForBlob(t,e){return this.postXHR("blob",t,e)}getBuffer(t,e){return this.getXHR("arraybuffer",t,e)}postObjectForBuffer(t,e){return this.postXHR("arraybuffer",t,e)}getText(t,e){return this.getXHR("text",t,e)}postObjectForText(t,e){return this.postXHR("text",t,e)}async getObject(t,e){return(await this.getXHR("json",t,e)).content}async postObjectForObject(t,e){return(await this.postXHR("json",t,e)).content}postObject(t,e){return this.postXHR("",t,e)}getFile(t,e){return this.translateResponse(this.getBlob(t,e),URL.createObjectURL)}postObjectForFile(t,e){return this.translateResponse(this.postObjectForBlob(t,e),URL.createObjectURL)}getXml(t,e){return this.translateResponse(this.getXHR("document",t,e),n=>n.documentElement)}postObjectForXml(t,e){return this.translateResponse(this.postXHR("document",t,e),n=>n.documentElement)}getImageBitmap(t,e){return this.translateResponse(this.getBlob(t,e),createImageBitmap)}async postObjectForImageBitmap(t,e){return this.translateResponse(this.postObjectForBlob(t,e),createImageBitmap)}};var pt=class extends it{constructor(t){super(t);let e=new ct;Ie(this,e)}};function V(r){return[r.content]}function Ie(r,t){r.addVoidMethod("setRequestVerificationToken",t,t.setRequestVerificationToken),r.addMethod("getBuffer",t,t.getBuffer,V),r.addMethod("postObjectForBuffer",t,t.postObjectForBuffer,V),r.addMethod("getImageBitmap",t,t.getImageBitmap,V),r.addMethod("postObjectForImageBitmap",t,t.postObjectForImageBitmap,V),r.addMethod("getObject",t,t.getObject),r.addMethod("getFile",t,t.getFile),r.addMethod("getText",t,t.getText),r.addMethod("postObject",t,t.postObject),r.addMethod("postObjectForObject",t,t.postObjectForObject),r.addMethod("postObjectForFile",t,t.postObjectForFile),r.addMethod("postObjectForText",t,t.postObjectForText),r.addMethod("head",t,t.head)}globalThis.server=new pt(globalThis);
//# sourceMappingURL=index.min.js.map
